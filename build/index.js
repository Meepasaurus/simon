"use strict";var Simon=function(e,t){var n=e,o=[],c=!1,i=!1,r=0,s=0,a=0,u=t,l="0";return n>99?n=99:n<1&&(n=1),$("#high-score").text(u),{checkPlayerMove:function(e){var t=this;o[a]===e?(this.btnClick(e),a++):(document.getElementById("miss").play(),i=!1,$(".score").addClass("incorrect"),$(".score").text("X"),c?window.setTimeout(function(){$(".score").removeClass("incorrect"),$(".score").text(r)},350):window.setTimeout(function(){$(".score").removeClass("incorrect")},300),c?$(".status").find("p").text("Game Over!"):(a=0,s=0,window.setTimeout(function(){$(".score").text(r),t.playSequence()},750))),a===r&&(r>u&&(u=r,localStorage.setItem("score",u.toString()),$("#high-score").text(u)),i=!1,r++,a=0,$(".score").addClass("correct"),window.setTimeout(function(){$(".score").removeClass("correct")},300),r>=n+1?($(".score").text(r-1),$(".status").find("p").text("You win!"),document.getElementById("success").play()):($(".score").text(r),window.setTimeout(function(){t.generateNext()},750)))},btnClick:function(e){this.playSound(e),$(".btn-"+e).addClass("active-"+e),window.setTimeout(function(){$(".btn-"+e).removeClass("active-"+e)},200)},playSound:function(e){var t=document.getElementById(e.toString()+l);t.pause(),t.currentTime=0,t.play(),l="0"===l?"1":"0"},playSequence:function(){var e=this;this.btnClick(o[s]),s++,s===r?(i=!0,s=0):window.setTimeout(function(){e.playSequence()},500)},generateNext:function(){o.push(Math.floor(4*Math.random())),this.playSequence()},getPlayerTurn:function(){return i},newGame:function(e){i=!1,c=e,o=[],r=1,s=0,a=0,$(".status").find("p").text("Repeat after me"),$(".score").text(r),this.generateNext()}}};$(document).ready(function(){var e=$.parseJSON(localStorage.getItem("score"));null===e&&(localStorage.setItem("score","0"),e=0);var t=new Simon(20,e);$(".game-btn").on("click",function(){t.getPlayerTurn()&&t.checkPlayerMove($(this).data("id"))}),$("#new-game").on("click",function(){t.newGame(!1)}),$("#new-strict-game").on("click",function(){t.newGame(!0)})});